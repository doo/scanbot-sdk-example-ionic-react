import{__awaiter,__generator}from"tslib";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */import{r as registerInstance,e as createEvent,h,H as Host,i as getElement}from"./index-8e692445.js";import{g as getElementRoot}from"./helpers-3b390e48.js";var pickerInternalIosCss=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{left:0;top:0;height:83px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-after{left:0;top:116px;height:84px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:-1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host .picker-highlight{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, var(--background, var(--ion-background-color, #fff))), to(rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8)));background:linear-gradient(to bottom, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8) 100%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(20%, var(--background, var(--ion-background-color, #fff))), to(rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8)));background:linear-gradient(to top, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8) 100%)}:host .picker-highlight{background:var(--ion-color-step-150, #eeeeef)}";var pickerInternalMdCss=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{left:0;top:0;height:83px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-after{left:0;top:116px;height:84px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:-1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host .picker-highlight{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, var(--background, var(--ion-background-color, #fff))), color-stop(90%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0)));background:linear-gradient(to bottom, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0) 90%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(30%, var(--background, var(--ion-background-color, #fff))), color-stop(90%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0)));background:linear-gradient(to top, var(--background, var(--ion-background-color, #fff)) 30%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0) 90%)}";var PickerInternal=function(){function t(t){var e=this;registerInstance(this,t);this.ionInputModeChange=createEvent(this,"ionInputModeChange",7);this.useInputMode=false;this.isInHighlightBounds=function(t){var n=e.highlightEl;if(!n){return false}var r=n.getBoundingClientRect();var i=t.clientX<r.left||t.clientX>r.right;var o=t.clientY<r.top||t.clientY>r.bottom;if(i||o){return false}return true};this.onFocusOut=function(t){var n=t.relatedTarget;if(!n||n.tagName!=="ION-PICKER-COLUMN-INTERNAL"&&n!==e.inputEl){e.exitInputMode()}};this.onFocusIn=function(t){var n=t.target;if(n.tagName!=="ION-PICKER-COLUMN-INTERNAL"){return}if(!e.actionOnClick){var r=n;var i=r.numericInput;if(i){e.enterInputMode(r,false)}else{e.exitInputMode()}}};this.onClick=function(){var t=e.actionOnClick;if(t){t();e.actionOnClick=undefined}};this.onPointerDown=function(t){var n=e,r=n.useInputMode,i=n.inputModeColumn,o=n.el;if(e.isInHighlightBounds(t)){if(r){if(t.target.tagName==="ION-PICKER-COLUMN-INTERNAL"){if(i&&i===t.target){e.actionOnClick=function(){e.enterInputMode()}}else{e.actionOnClick=function(){e.enterInputMode(t.target)}}}else{e.actionOnClick=function(){e.exitInputMode()}}}else{var a=o.querySelectorAll("ion-picker-column-internal.picker-column-numeric-input");var u=a.length===1?t.target:undefined;e.actionOnClick=function(){e.enterInputMode(u)}}return}e.actionOnClick=function(){e.exitInputMode()}};this.enterInputMode=function(t,n){if(n===void 0){n=true}var r=e,i=r.inputEl,o=r.el;if(!i){return}var a=o.querySelector("ion-picker-column-internal.picker-column-numeric-input");if(!a){return}e.useInputMode=true;e.inputModeColumn=t;if(n){if(e.destroyKeypressListener){e.destroyKeypressListener();e.destroyKeypressListener=undefined}i.focus()}else{o.addEventListener("keypress",e.onKeyPress);e.destroyKeypressListener=function(){o.removeEventListener("keypress",e.onKeyPress)}}e.emitInputModeChange()};this.onKeyPress=function(t){var n=e.inputEl;if(!n){return}var r=parseInt(t.key,10);if(!Number.isNaN(r)){n.value+=t.key;e.onInputChange()}};this.selectSingleColumn=function(){var t=e,n=t.inputEl,r=t.inputModeColumn,i=t.singleColumnSearchTimeout;if(!n||!r){return}var o=r.items.filter((function(t){return t.disabled!==true}));if(i){clearTimeout(i)}e.singleColumnSearchTimeout=setTimeout((function(){n.value="";e.singleColumnSearchTimeout=undefined}),1e3);if(n.value.length>=3){var a=n.value.length-2;var u=n.value.substring(a);n.value=u;e.selectSingleColumn();return}var l=o.find((function(t){var e=t.text;var r=e.replace(/^0+(?=[1-9])|0+(?=0$)/,"");return r===n.value}));if(l){r.setValue(l.value);return}if(n.value.length===2){var s=n.value.substring(n.value.length-1);n.value=s;e.selectSingleColumn()}};this.searchColumn=function(t,e,n){if(n===void 0){n="start"}var r=n==="start"?/^0+/:/0$/;var i=t.items.find((function(t){var n=t.text,i=t.disabled;return i!==true&&n.replace(r,"")===e}));if(i){t.setValue(i.value)}};this.selectMultiColumn=function(){var t=e,n=t.inputEl,r=t.el;if(!n){return}var i=Array.from(r.querySelectorAll("ion-picker-column-internal")).filter((function(t){return t.numericInput}));var o=i[0];var a=i[1];var u=n.value;var l;switch(u.length){case 1:e.searchColumn(o,u);break;case 2:var s=n.value.substring(0,1);u=s==="0"||s==="1"?n.value:s;e.searchColumn(o,u);if(u.length===1){l=n.value.substring(n.value.length-1);e.searchColumn(a,l,"end")}break;case 3:var c=n.value.substring(0,1);u=c==="0"||c==="1"?n.value.substring(0,2):c;e.searchColumn(o,u);l=u.length===1?n.value.substring(1):n.value.substring(2);e.searchColumn(a,l,"end");break;case 4:var g=n.value.substring(0,1);u=g==="0"||g==="1"?n.value.substring(0,2):g;e.searchColumn(o,u);var p=u.length===1?n.value.substring(1,n.value.length):n.value.substring(2,n.value.length);e.searchColumn(a,p,"end");break;default:var d=n.value.length-4;var f=n.value.substring(d);n.value=f;e.selectMultiColumn();break}};this.onInputChange=function(){var t=e,n=t.useInputMode,r=t.inputEl,i=t.inputModeColumn;if(!n||!r){return}if(i){e.selectSingleColumn()}else{e.selectMultiColumn()}};this.emitInputModeChange=function(){var t=e,n=t.useInputMode,r=t.inputModeColumn;e.ionInputModeChange.emit({useInputMode:n,inputModeColumn:r})}}t.prototype.preventTouchStartPropagation=function(t){t.stopPropagation()};t.prototype.componentWillLoad=function(){getElementRoot(this.el).addEventListener("focusin",this.onFocusIn);getElementRoot(this.el).addEventListener("focusout",this.onFocusOut)};t.prototype.exitInputMode=function(){return __awaiter(this,void 0,void 0,(function(){var t,e,n;return __generator(this,(function(r){t=this,e=t.inputEl,n=t.useInputMode;if(!n||!e){return[2]}this.useInputMode=false;this.inputModeColumn=undefined;e.blur();e.value="";if(this.destroyKeypressListener){this.destroyKeypressListener();this.destroyKeypressListener=undefined}this.emitInputModeChange();return[2]}))}))};t.prototype.render=function(){var t=this;return h(Host,{onPointerDown:function(e){return t.onPointerDown(e)},onClick:function(){return t.onClick()}},h("input",{"aria-hidden":"true",tabindex:-1,inputmode:"numeric",type:"number",ref:function(e){return t.inputEl=e},onInput:function(){return t.onInputChange()},onBlur:function(){return t.exitInputMode()}}),h("div",{class:"picker-before"}),h("div",{class:"picker-after"}),h("div",{class:"picker-highlight",ref:function(e){return t.highlightEl=e}}),h("slot",null))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();PickerInternal.style={ios:pickerInternalIosCss,md:pickerInternalMdCss};export{PickerInternal as ion_picker_internal};