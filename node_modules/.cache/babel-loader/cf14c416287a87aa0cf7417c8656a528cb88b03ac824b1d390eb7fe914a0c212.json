{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IonContent,IonHeader,IonFooter,IonPage,IonTitle,IonToolbar,IonButton,IonButtons,IonBackButton,IonImg,useIonAlert,useIonViewWillEnter}from'@ionic/react';import'./Home.css';import React,{useState}from'react';import{useHistory}from'react-router';import{ImageResultsRepository}from'../utils/ImageRepository';import ScanbotSdk from'cordova-plugin-scanbot-sdk';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageEditView=function ImageEditView(_ref){var match=_ref.match;var page=ImageResultsRepository.INSTANCE.getPageById(match.params.pageId);var history=useHistory();var _useIonAlert=useIonAlert(),_useIonAlert2=_slicedToArray(_useIonAlert,1),presentAlert=_useIonAlert2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(page),_useState4=_slicedToArray(_useState3,2),selectedPage=_useState4[0],setSelectedPage=_useState4[1];useIonViewWillEnter(function(){loadPage();});// load selected image\nfunction loadPage(){if(page==undefined)return;setSelectedPage(page);generateImageURL(page);}// Scanbot SDK cropping feature\nvar imageCrop=function imageCrop(page){if(page==undefined){return;}ScanbotSdk.UI.startCroppingScreen(function(croppingResult){if(croppingResult.page==undefined)return;ImageResultsRepository.INSTANCE.updatePage(croppingResult.page);generateImageURL(croppingResult.page);},function(error){presentAlert({header:'Error',subHeader:error.status,message:error.message,buttons:['OK']});},{page:page,uiConfigs:{doneButtonTitle:'Save',interfaceOrientation:'PORTRAIT',topBarBackgroundColor:'#c8193c',bottomBarBackgroundColor:'#c8193c',hintTitle:'Custom hint:\\nDrag the dots to the document edges.',hintTitleColor:'#0000ff'}});};// scanbot SDK generate image url feature\nvar generateImageURL=function generateImageURL(page){ScanbotSdk.getImageData(function(result){var extension='png';var url=\"data:image/\".concat(extension,\";base64,\")+result.base64ImageData;setUrl(url);},function(error){presentAlert({header:'Error',subHeader:error.status,message:error.message,buttons:['OK']});},{imageFileUri:page.documentPreviewImageFileUri});};return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonBackButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:\"Image Edit View\"})]})}),/*#__PURE__*/_jsx(IonContent,{fullscreen:true,children:/*#__PURE__*/_jsx(IonImg,{src:url})}),/*#__PURE__*/_jsx(IonFooter,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonButton,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:imageCrop(selectedPage);case 1:case\"end\":return _context.stop();}},_callee);})),children:\"Crop\"})}),/*#__PURE__*/_jsx(IonButtons,{slot:\"end\",children:/*#__PURE__*/_jsx(IonButton,{children:\"Filtter\"})})]})})]});};export default ImageEditView;","map":{"version":3,"names":["IonContent","IonHeader","IonFooter","IonPage","IonTitle","IonToolbar","IonButton","IonButtons","IonBackButton","IonImg","useIonAlert","useIonViewWillEnter","React","useState","useHistory","ImageResultsRepository","ScanbotSdk","ImageEditView","match","page","INSTANCE","getPageById","params","pageId","history","presentAlert","url","setUrl","selectedPage","setSelectedPage","loadPage","undefined","generateImageURL","imageCrop","UI","startCroppingScreen","croppingResult","updatePage","error","header","subHeader","status","message","buttons","uiConfigs","doneButtonTitle","interfaceOrientation","topBarBackgroundColor","bottomBarBackgroundColor","hintTitle","hintTitleColor","getImageData","result","extension","base64ImageData","imageFileUri","documentPreviewImageFileUri"],"sources":["/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/src/pages/ImageEditView.tsx"],"sourcesContent":["import { \n    IonContent, \n    IonHeader,\n    IonFooter,\n    IonPage, \n    IonTitle, \n    IonToolbar, \n    IonButton,\n    IonButtons,\n    IonBackButton,\n    IonImg,\n    useIonAlert,\n    useIonViewWillEnter } from '@ionic/react';\n\n  import './Home.css';\n  \n  import React, {useState } from 'react';\n  import { RouteComponentProps, useHistory } from 'react-router';\n  \n  import { ImageResultsRepository } from '../utils/ImageRepository';\n  \n  import ScanbotSdk, { \n    Page } from 'cordova-plugin-scanbot-sdk';\n  \n  interface ImageEditViewIdProps extends RouteComponentProps<{\n    pageId: string;\n}> {}\n\n  const ImageEditView: React.FC<ImageEditViewIdProps> = ({match}) => {\n  \n    let page = ImageResultsRepository.INSTANCE.getPageById(match.params.pageId);\n\n    const history = useHistory();\n    const [presentAlert] = useIonAlert();  \n    const [ url, setUrl ] = useState('');\n    const [ selectedPage, setSelectedPage ] = useState(page);\n\n    useIonViewWillEnter(() => {\n        loadPage();\n    });\n\n    // load selected image\n    function loadPage() {\n\n        if(page == undefined) return;\n\n        setSelectedPage(page);\n\n        generateImageURL(page); \n    }\n\n    // Scanbot SDK cropping feature\n    const imageCrop = (page: Page | undefined) => {\n\n        if (page == undefined){\n            return;\n        }\n        \n        ScanbotSdk.UI.startCroppingScreen(\n            (croppingResult) => {\n \n                if(croppingResult.page == undefined) return;\n                ImageResultsRepository.INSTANCE.updatePage(croppingResult.page);\n\n                generateImageURL(croppingResult.page);\n            }, \n            (error) => {\n                presentAlert({\n                    header: 'Error',\n                    subHeader: error.status,\n                    message: error.message,\n                    buttons: ['OK'],\n                })\n            }, {\n            page: page,\n            uiConfigs: {\n                doneButtonTitle: 'Save',\n                interfaceOrientation: 'PORTRAIT',\n                topBarBackgroundColor: '#c8193c',\n                bottomBarBackgroundColor: '#c8193c',\n                hintTitle: 'Custom hint:\\nDrag the dots to the document edges.',\n                hintTitleColor: '#0000ff'\n            }})\n    }\n\n    // scanbot SDK generate image url feature\n    const generateImageURL = (page: Page) => {\n        ScanbotSdk.getImageData((result) => {\n\n            const extension = 'png';\n\n            let url = `data:image/${extension};base64,` + result.base64ImageData;\n\n            setUrl(url);\n        },\n        (error) => {\n            presentAlert({\n                header: 'Error',\n                subHeader: error.status,\n                message: error.message,\n                buttons: ['OK'],\n            })\n         },\n        { imageFileUri: page.documentPreviewImageFileUri as string }); \n    }\n\n    return (\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n                <IonBackButton />\n            </IonButtons>\n            <IonTitle>Image Edit View</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonContent fullscreen>\n            <IonImg src={url} />\n        </IonContent>\n\n        <IonFooter>\n            <IonToolbar>\n                <IonButtons slot=\"start\">\n                    <IonButton onClick = { async () => {\n                        imageCrop(selectedPage);\n                    }}>Crop</IonButton>\n                </IonButtons>\n                <IonButtons slot=\"end\">\n                    <IonButton>Filtter</IonButton>\n                </IonButtons>\n            </IonToolbar>\n      </IonFooter>\n      </IonPage>\n    );\n  };\n  \n  export default ImageEditView;"],"mappings":"wdAAA,OACIA,UAAU,CACVC,SAAS,CACTC,SAAS,CACTC,OAAO,CACPC,QAAQ,CACRC,UAAU,CACVC,SAAS,CACTC,UAAU,CACVC,aAAa,CACbC,MAAM,CACNC,WAAW,CACXC,mBAAmB,KAAQ,cAAc,CAE3C,MAAO,YAAY,CAEnB,MAAOC,MAAK,EAAGC,QAAQ,KAAQ,OAAO,CACtC,OAA8BC,UAAU,KAAQ,cAAc,CAE9D,OAASC,sBAAsB,KAAQ,0BAA0B,CAEjE,MAAOC,WAAU,KACH,4BAA4B,CAAC,wFAM3C,GAAMC,cAA6C,CAAG,QAAhDA,cAA6C,MAAgB,IAAXC,MAAK,MAALA,KAAK,CAE3D,GAAIC,KAAI,CAAGJ,sBAAsB,CAACK,QAAQ,CAACC,WAAW,CAACH,KAAK,CAACI,MAAM,CAACC,MAAM,CAAC,CAE3E,GAAMC,QAAO,CAAGV,UAAU,EAAE,CAC5B,iBAAuBJ,WAAW,EAAE,8CAA7Be,YAAY,kBACnB,cAAwBZ,QAAQ,CAAC,EAAE,CAAC,wCAA5Ba,GAAG,eAAEC,MAAM,eACnB,eAA0Cd,QAAQ,CAACM,IAAI,CAAC,yCAAhDS,YAAY,eAAEC,eAAe,eAErClB,mBAAmB,CAAC,UAAM,CACtBmB,QAAQ,EAAE,CACd,CAAC,CAAC,CAEF;AACA,QAASA,SAAQ,EAAG,CAEhB,GAAGX,IAAI,EAAIY,SAAS,CAAE,OAEtBF,eAAe,CAACV,IAAI,CAAC,CAErBa,gBAAgB,CAACb,IAAI,CAAC,CAC1B,CAEA;AACA,GAAMc,UAAS,CAAG,QAAZA,UAAS,CAAId,IAAsB,CAAK,CAE1C,GAAIA,IAAI,EAAIY,SAAS,CAAC,CAClB,OACJ,CAEAf,UAAU,CAACkB,EAAE,CAACC,mBAAmB,CAC7B,SAACC,cAAc,CAAK,CAEhB,GAAGA,cAAc,CAACjB,IAAI,EAAIY,SAAS,CAAE,OACrChB,sBAAsB,CAACK,QAAQ,CAACiB,UAAU,CAACD,cAAc,CAACjB,IAAI,CAAC,CAE/Da,gBAAgB,CAACI,cAAc,CAACjB,IAAI,CAAC,CACzC,CAAC,CACD,SAACmB,KAAK,CAAK,CACPb,YAAY,CAAC,CACTc,MAAM,CAAE,OAAO,CACfC,SAAS,CAAEF,KAAK,CAACG,MAAM,CACvBC,OAAO,CAAEJ,KAAK,CAACI,OAAO,CACtBC,OAAO,CAAE,CAAC,IAAI,CAClB,CAAC,CAAC,CACN,CAAC,CAAE,CACHxB,IAAI,CAAEA,IAAI,CACVyB,SAAS,CAAE,CACPC,eAAe,CAAE,MAAM,CACvBC,oBAAoB,CAAE,UAAU,CAChCC,qBAAqB,CAAE,SAAS,CAChCC,wBAAwB,CAAE,SAAS,CACnCC,SAAS,CAAE,oDAAoD,CAC/DC,cAAc,CAAE,SACpB,CAAC,CAAC,CAAC,CACX,CAAC,CAED;AACA,GAAMlB,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIb,IAAU,CAAK,CACrCH,UAAU,CAACmC,YAAY,CAAC,SAACC,MAAM,CAAK,CAEhC,GAAMC,UAAS,CAAG,KAAK,CAEvB,GAAI3B,IAAG,CAAG,qBAAc2B,SAAS,aAAaD,MAAM,CAACE,eAAe,CAEpE3B,MAAM,CAACD,GAAG,CAAC,CACf,CAAC,CACD,SAACY,KAAK,CAAK,CACPb,YAAY,CAAC,CACTc,MAAM,CAAE,OAAO,CACfC,SAAS,CAAEF,KAAK,CAACG,MAAM,CACvBC,OAAO,CAAEJ,KAAK,CAACI,OAAO,CACtBC,OAAO,CAAE,CAAC,IAAI,CAClB,CAAC,CAAC,CACL,CAAC,CACF,CAAEY,YAAY,CAAEpC,IAAI,CAACqC,2BAAsC,CAAC,CAAC,CACjE,CAAC,CAED,mBACE,MAAC,OAAO,yBACN,KAAC,SAAS,wBACR,MAAC,UAAU,yBACT,KAAC,UAAU,EAAC,IAAI,CAAC,OAAO,uBACpB,KAAC,aAAa,IAAG,EACR,cACb,KAAC,QAAQ,WAAC,iBAAe,EAAW,GACzB,EACH,cAEZ,KAAC,UAAU,EAAC,UAAU,4BAClB,KAAC,MAAM,EAAC,GAAG,CAAE9B,GAAI,EAAG,EACX,cAEb,KAAC,SAAS,wBACN,MAAC,UAAU,yBACP,KAAC,UAAU,EAAC,IAAI,CAAC,OAAO,uBACpB,KAAC,SAAS,EAAC,OAAO,wEAAK,oIACnBO,SAAS,CAACL,YAAY,CAAC,CAAC,qDAC3B,EAAC,UAAC,MAAI,EAAY,EACV,cACb,KAAC,UAAU,EAAC,IAAI,CAAC,KAAK,uBAClB,KAAC,SAAS,WAAC,SAAO,EAAY,EACrB,GACJ,EACP,GACF,CAEd,CAAC,CAED,cAAeX,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}