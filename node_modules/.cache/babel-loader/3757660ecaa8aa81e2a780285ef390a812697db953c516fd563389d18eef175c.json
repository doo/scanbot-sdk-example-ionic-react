{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import ScanbotSdk from\"cordova-plugin-scanbot-sdk\";export var ImageResultsRepository=/*#__PURE__*/function(){function ImageResultsRepository(){_classCallCheck(this,ImageResultsRepository);this.pages=[];}_createClass(ImageResultsRepository,[{key:\"getPages\",value:function getPages(){return this.pages;}},{key:\"getPageById\",value:function getPageById(id){return this.pages.find(function(p){return p.pageId===id;});}},{key:\"addPages\",value:function(){var _addPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pages){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.pages=this.pages.concat(pages);case 1:case\"end\":return _context.stop();}},_callee,this);}));function addPages(_x){return _addPages.apply(this,arguments);}return addPages;}()},{key:\"updatePage\",value:function(){var _updatePage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(page){var replaced,i;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:replaced=false;i=0;case 2:if(!(i<this.pages.length)){_context2.next=10;break;}if(!(this.pages[i].pageId===page.pageId)){_context2.next=7;break;}this.pages[i]=page;replaced=true;return _context2.abrupt(\"break\",10);case 7:++i;_context2.next=2;break;case 10:if(!replaced){this.pages.push(page);}case 11:case\"end\":return _context2.stop();}},_callee2,this);}));function updatePage(_x2){return _updatePage.apply(this,arguments);}return updatePage;}()},{key:\"removePage\",value:function(){var _removePage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(page){var index;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:index=this.pages.findIndex(function(p){return p.pageId===page.pageId;});if(index>-1){this.pages.splice(index,1);}case 2:case\"end\":return _context3.stop();}},_callee3,this);}));function removePage(_x3){return _removePage.apply(this,arguments);}return removePage;}()},{key:\"removeAllPages\",value:function(){var _removeAllPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:this.pages=[];case 1:case\"end\":return _context4.stop();}},_callee4,this);}));function removeAllPages(){return _removeAllPages.apply(this,arguments);}return removeAllPages;}()},{key:\"fetchDataFromUri\",value:function fetchDataFromUri(path){var imageData;ScanbotSdk.getImageData(function(result){var extension='png';return imageData=\"data:image/\".concat(extension,\";base64,\")+result.base64ImageData;},function(){},{imageFileUri:path});}}]);return ImageResultsRepository;}();ImageResultsRepository.INSTANCE=new ImageResultsRepository();","map":{"version":3,"names":["ScanbotSdk","ImageResultsRepository","pages","id","find","p","pageId","concat","page","replaced","i","length","push","index","findIndex","splice","path","imageData","getImageData","result","extension","base64ImageData","imageFileUri","INSTANCE"],"sources":["/Users/chanduranwala/Scanbot/ionic/scanbot-sdk-example-ionic-react/src/utils/ImageRepository.tsx"],"sourcesContent":["import ScanbotSdk, { Page } from \"cordova-plugin-scanbot-sdk\";\n\nexport class ImageResultsRepository {\n\n    public static INSTANCE = new ImageResultsRepository();\n\n    private pages: Page[] = [];\n\n    public getPages(): Page[] {\n        return this.pages;\n    }\n\n    public getPageById(id: string) {\n        return this.pages.find(p => p.pageId === id);\n    }\n\n    public async addPages(pages: Page[]) {\n        this.pages = this.pages.concat(pages);\n    }\n\n    public async updatePage(page: Page) {\n        let replaced = false;\n        for (let i = 0; i < this.pages.length; ++i) {\n            if (this.pages[i].pageId === page.pageId) {\n                this.pages[i] = page;\n                replaced = true;\n                break;\n            }\n        }\n        if (!replaced) {\n            this.pages.push(page);\n        }\n    }\n\n    public async removePage(page: Page) {\n        const index = this.pages.findIndex(p => p.pageId === page.pageId);\n        if (index > -1) {\n            this.pages.splice(index, 1);\n        }\n    }\n\n    public async removeAllPages() {\n        this.pages = [];\n    }\n\n    public fetchDataFromUri(path: string) {\n\n        let imageData: string;\n\n        ScanbotSdk.getImageData((result) => {\n\n            const extension = 'png';\n\n            return imageData = `data:image/${extension};base64,` + result.base64ImageData;\n\n        },\n        () => { },\n        { imageFileUri: path }); \n    } \n}"],"mappings":"8mBAAA,MAAOA,WAAU,KAAgB,4BAA4B,CAE7D,UAAaC,uBAAsB,6GAIvBC,KAAK,CAAW,EAAE,6DAE1B,mBAA0B,CACtB,MAAO,KAAI,CAACA,KAAK,CACrB,CAAC,2BAED,qBAAmBC,EAAU,CAAE,CAC3B,MAAO,KAAI,CAACD,KAAK,CAACE,IAAI,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACC,MAAM,GAAKH,EAAE,GAAC,CAChD,CAAC,2GAED,iBAAsBD,KAAa,mHAC/B,IAAI,CAACA,KAAK,CAAG,IAAI,CAACA,KAAK,CAACK,MAAM,CAACL,KAAK,CAAC,CAAC,0DACzC,mMAED,kBAAwBM,IAAU,sIAC1BC,QAAQ,CAAG,KAAK,CACXC,CAAC,CAAG,CAAC,aAAEA,CAAC,CAAG,IAAI,CAACR,KAAK,CAACS,MAAM,iCAC7B,IAAI,CAACT,KAAK,CAACQ,CAAC,CAAC,CAACJ,MAAM,GAAKE,IAAI,CAACF,MAAM,2BACpC,IAAI,CAACJ,KAAK,CAACQ,CAAC,CAAC,CAAGF,IAAI,CACpBC,QAAQ,CAAG,IAAI,CAAC,2CAHe,EAAEC,CAAC,gCAO1C,GAAI,CAACD,QAAQ,CAAE,CACX,IAAI,CAACP,KAAK,CAACU,IAAI,CAACJ,IAAI,CAAC,CACzB,CAAC,6DACJ,0MAED,kBAAwBA,IAAU,iIACxBK,KAAK,CAAG,IAAI,CAACX,KAAK,CAACY,SAAS,CAAC,SAAAT,CAAC,QAAIA,EAAC,CAACC,MAAM,GAAKE,IAAI,CAACF,MAAM,GAAC,CACjE,GAAIO,KAAK,CAAG,CAAC,CAAC,CAAE,CACZ,IAAI,CAACX,KAAK,CAACa,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,CAC/B,CAAC,4DACJ,kNAED,yIACI,IAAI,CAACX,KAAK,CAAG,EAAE,CAAC,4DACnB,oIAED,0BAAwBc,IAAY,CAAE,CAElC,GAAIC,UAAiB,CAErBjB,UAAU,CAACkB,YAAY,CAAC,SAACC,MAAM,CAAK,CAEhC,GAAMC,UAAS,CAAG,KAAK,CAEvB,MAAOH,UAAS,CAAG,qBAAcG,SAAS,aAAaD,MAAM,CAACE,eAAe,CAEjF,CAAC,CACD,UAAM,CAAE,CAAC,CACT,CAAEC,YAAY,CAAEN,IAAK,CAAC,CAAC,CAC3B,CAAC,sCAxDQf,sBAAsB,CAEjBsB,QAAQ,CAAG,GAAItB,uBAAsB,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}